(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3485:function(e,t,n){"use strict";n.d(t,{A:function(){return y}});var r=n(4246),o=n(8742),a=n.n(o),i=n(505),s=n(7378),c=n(4861),u=n(3368),l=n(596),d=n(8579),f=n(9894),h=n(8486),p=n(930),x=function(){var e=(0,s.useContext)(h.Z);return(0,r.jsxs)("div",{className:"flex flex-1 flex-row py-3 items-center justify-evenly px-4 sm:space-x-40 md:space-x-60",children:[(0,r.jsx)("div",{children:(0,r.jsx)(f.default,{href:"/",children:(0,r.jsx)("a",{title:"Home","aria-label":"Home",className:"flex items-center",children:(0,r.jsx)(u.tvw,{className:"w-7 h-7"})})})}),null!==e&&void 0!==e&&e.user_avatar?(0,r.jsx)("div",{className:"flex -space-x-1 overflow-hidden",children:(0,r.jsx)("div",{className:"relative inline-block h-12 w-12 rounded-full ring-2 ring-theme-blueGray-900",children:(0,r.jsx)(f.default,{href:"/p/".concat(e.user_username),children:(0,r.jsx)("a",{children:(0,r.jsx)(d.default,{alt:"user-avatar",src:e.user_avatar,layout:"fill"})})})})}):(0,r.jsx)(l.yB,{color:"#0F172A",highlightColor:"#1E293B",children:(0,r.jsx)(l.ZP,{circle:!0,height:44,width:44})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{"aria-label":"Sign out",className:"flex items-center",title:"Sign out",onClick:function(){return p.m.signOut()},children:(0,r.jsx)(u.R0g,{className:"w-7 h-7"})})})]})},v=n(2465),m=n(6677),y=function(e){var t=e.children,n=(0,s.useContext)(c.Z).fireId,o=(0,s.useState)(null),u=o[0],l=o[1],d=(0,s.useState)(!0),f=d[0],p=d[1],y=(0,m.useRouter)();return(0,s.useEffect)((function(){p("/sign-up"!==y.pathname.toString()&&"/sign-in"!==y.pathname.toString())}),[y.pathname]),(0,s.useEffect)((function(){(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.kv)(n);case 2:t=e.sent,JSON.stringify(u)!==JSON.stringify(t)&&l(t);case 4:case"end":return e.stop()}}),e)})))()}),[n,u]),(0,r.jsx)(h.Z.Provider,{value:u,children:(0,r.jsxs)("div",{className:"bg-theme-blueGray-900 min-h-screen flex flex-col text-theme-blueGray-400 selection:bg-theme-blueGray-800 selection:text-theme-blueGray-400",children:[f&&(0,r.jsx)("header",{className:"flex justify-center",children:(0,r.jsx)(x,{})}),(0,r.jsx)("main",{className:"flex-1 ".concat(f&&"border-t-2"," border-theme-primary-500 ").concat(!f&&"flex justify-center items-center"),children:t})]})})}},8486:function(e,t,n){"use strict";var r=(0,n(7378).createContext)(null);t.Z=r},9887:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(4246),o=n(8038),a=n(3485),i=n(8742),s=n.n(i),c=n(505),u=n(9148),l=n(596),d=n(7378),f=n(8238),h=n(9848),p=n(3368),x=n(2465),v=function(e){var t=e.page,n=e.user,o=e.stateReload,a=e.highlight,i=(0,d.useState)(!1),u=i[0],l=i[1],v=(0,d.useState)(""),m=v[0],y=v[1],g=(0,d.useState)(!1),_=g[0],j=g[1],b=function(){var e=(0,c.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.c2)({page_id:t,todo_description:m,user_id:n,todo_highlight:_,task:"create"});case 2:y(""),j(!1),o();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("button",{type:"button","aria-label":"Add a task!",onClick:function(){return l(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-md bg-opacity-20 hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:(0,r.jsx)(p.wl8,{className:"w-6 h-6"})})}),(0,r.jsx)(f.u,{appear:!0,show:u,as:d.Fragment,children:(0,r.jsx)(h.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){return l(!1)},children:(0,r.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,r.jsx)(f.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(h.V.Overlay,{className:"fixed inset-0"})}),(0,r.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(f.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden align-middle transition-all transform bg-theme-blueGray-800 shadow-xl rounded-2xl space-y-5",children:[(0,r.jsx)(h.V.Title,{as:"h3",className:"text-2xl font-medium leading-6 text-white",children:"Add a task"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("input",{className:"text-xl text-gray-500 w-full p-2",onKeyDown:function(e){"Enter"===e.key?b():"Escape"===e.key&&l(!1)},onChange:function(e){var t=e.target;return y(t.value)},value:m})}),!a&&(0,r.jsx)("input",{type:"checkbox",defaultChecked:_,onClick:function(){return j(!_)}}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"button","aria-label":"Close add tasks popup",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-theme-fuchsia-200 bg-theme-primary-500/60 border border-transparent rounded-md hover:bg-theme-primary-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){l(!1)},children:"Done!"})})]})})]})})})]})},m=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stateReload,r=t.todo_id,o=t.todo_description,a=t.set_display_text_edit,e.next=3,(0,x.Oo)({todo_id:r,todo_description:o});case 3:a(!1),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.todo_id,r=t.todo_done,e.next=3,(0,x.pk)({todo_id:n,todo_done:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stateReload,r=t.todo_id,o=t.todo_archived,e.next=3,(0,x.G8)({todo_id:r,todo_archived:o});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stateReload,r=t.todo_id,e.next=3,(0,x.NW)(r);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stateReload,r=t.story_id,o=t.todo_id,e.next=3,(0,x._T)({story_id:r,todo_id:o});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,c.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stateReload,r=t.story_id,o=t.todo_id,e.next=3,(0,x.Ut)({story_id:r,todo_id:o});case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.todo,n=t.todo_description,o=t.todo_done,a=t.todo_id,i=t.todo_archived,s=t.todo_story_id,c=e.story.story_id,l=e.stateReload,f=e.highlight,h=(0,d.useState)(!1),p=h[0],x=h[1],v=(0,d.useState)(o),w=v[0],k=v[1],N=(0,d.useState)(n),S=N[0],T=N[1],C=(0,d.useState)(i),O=C[0],Z=C[1];return(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-left text-xl break-words leading-5",children:[(0,r.jsx)("input",{type:"checkbox",id:a,defaultChecked:w,onChange:function(){k(!o),y({todo_done:w,todo_id:a})}}),!0===p?(0,r.jsx)("input",{type:"text",className:"w-full cursor-pointer selection:bg-theme-blueGray-800 selection:text-theme-blueGray-400",value:S,onChange:function(e){var t=e.target;return T(t.value)},onKeyDown:function(e){"Enter"===e.key?(m({todo_id:a,todo_description:n,stateReload:l,set_display_text_edit:x}),x(!1)):"Escape"===e.key&&(x(!1),T(n))}}):(0,r.jsx)("p",{className:"".concat(w&&"line-through"," w-full cursor-pointer"),onClick:function(){return x(!p)},children:f?(0,r.jsx)("label",{className:"cursor-pointer highlight text-theme-fuchsia-500 leading-7 text-2xl",htmlFor:a,children:(0,r.jsx)("h1",{children:S})}):(0,r.jsx)("label",{className:"cursor-pointer",htmlFor:a,children:(0,r.jsx)("p",{children:S})})}),!f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{title:"Archive","aria-label":"Archive Task",onClick:function(){Z(!i),g({stateReload:l,todo_archived:O,todo_id:a})},children:(0,r.jsx)(u.rKT,{className:"w-6 h-6"})}),(0,r.jsx)("button",{"aria-label":"Permanently Delete Task",title:"Permanently Delete",onClick:function(){return _({stateReload:l,todo_id:a})},children:(0,r.jsx)(u.XHJ,{className:"w-6 h-6"})})]}),c===s?(0,r.jsx)("button",{title:"Remove from story","aria-label":"Remove from story",children:(0,r.jsx)(u.tEF,{className:"w-6 h-6",onClick:function(){return b({stateReload:l,story_id:c,todo_id:a})}})}):(0,r.jsx)("button",{title:"Add to story","aria-label":"Add to story",children:(0,r.jsx)(u.Xl7,{className:"w-6 h-6",onClick:function(){return j({stateReload:l,story_id:c,todo_id:a})}})})]})},k=n(8486),N=function(){var e=(0,d.useState)(null),t=e[0],n=e[1],o=(0,d.useState)(null),a=o[0],i=o[1],f=(0,d.useState)(0),h=f[0],p=f[1],m=(0,d.useState)(0),y=m[0],g=m[1],_=(0,d.useState)(null),j=_[0],b=_[1],N=(0,d.useState)(null),S=N[0],T=N[1],C=(0,d.useContext)(k.Z);(0,d.useEffect)((function(){(0,c.Z)(s().mark((function e(){var r,o,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date((new Date).setDate((new Date).getDate()-y)).toLocaleDateString("en-GB"),e.next=3,(0,x.Wt)(null===C||void 0===C?void 0:C.user_id,r);case 3:o=e.sent,JSON.stringify(t)!==JSON.stringify(o)&&(n(o),JSON.stringify(a)!==JSON.stringify(o.Page_Todo)&&(c=null===o||void 0===o?void 0:o.Page_Todo.filter((function(e){return!1===e.todo_highlight})),i(c),u=null===o||void 0===o?void 0:o.Page_Todo.filter((function(e){return!0===e.todo_highlight})),b(u[0])));case 5:case"end":return e.stop()}}),e)})))()}),[t,null===C||void 0===C?void 0:C.user_id,h,a,y,S]),(0,d.useEffect)((function(){JSON.stringify(S)!==JSON.stringify(null===t||void 0===t?void 0:t.Page_Story)&&T(null===t||void 0===t?void 0:t.Page_Story)}),[h,a,t,S]);var O=function(){p(h+1)};return(0,r.jsxs)("div",{className:"noScrollbar space-y-5 max-h-[80vh] w-11/12 sm:max-w-md md:max-w-lg py-4 px-8 bg-theme-blueGray-800 shadow-lg rounded-lg mx-auto selection:bg-theme-primary-500/60 overflow-y-scroll overflow-x-hidden",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("p",{className:"text-4xl",children:(null===t||void 0===t?void 0:t.page_title)||new Date((new Date).setDate((new Date).getDate()-y)).toLocaleDateString("en-GB")}),(0,r.jsx)(v,{user:null===C||void 0===C?void 0:C.user_id,page:null===t||void 0===t?void 0:t.page_id,highlight:j,stateReload:O})]}),(0,r.jsx)("hr",{className:"border-dashed"}),(0,r.jsxs)("div",{className:"space-y-1",children:[j&&S&&(0,r.jsx)(w,{todo:j,highlight:!0,story:S,stateReload:O}),a&&S?null===a||void 0===a?void 0:a.map((function(e){return(0,r.jsx)(w,{todo:e,story:S,stateReload:O},e.todo_id)})):(0,r.jsx)(l.yB,{color:"#0F172A",highlightColor:"#1E293B",children:(0,r.jsx)(l.ZP,{count:10,height:20})})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{"aria-label":"Go to previous date page",onClick:function(){return g(y+1)},children:(0,r.jsx)(u.o03,{className:"w-6 h-6"})}),(0,r.jsx)("button",{"aria-label":"Go to next date page",onClick:function(){return g(y-1)},children:(0,r.jsx)(u.D6v,{className:"w-6 h-6"})})]})]})};function S(){return(0,r.jsxs)(a.A,{children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:"Daily Tasks | Task Highlights"}),(0,r.jsx)("meta",{name:"description",content:"TaskHighlights is a minimalistic Todo app that uses accountability to supercharge your productivity"}),(0,r.jsx)("meta",{property:"og:title",content:"Daily Tasks | Task Highlights"}),(0,r.jsx)("link",{rel:"icon",href:"./favicon.ico"})]}),(0,r.jsx)("div",{className:"text-4xl flex-1 items-center text-center mt-5",children:(0,r.jsx)(N,{})})]})}},2465:function(e,t,n){"use strict";n.d(t,{_T:function(){return m},Wt:function(){return d},c2:function(){return f},oF:function(){return l},NW:function(){return x},kv:function(){return u},Ut:function(){return y},G8:function(){return v},pk:function(){return h},Oo:function(){return p}});var r=n(8742),o=n.n(r),a=n(505),i=n(759),s=n.n(i),c="/api/v1/",u=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(c,"user?user_id=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s()("".concat(c,"user"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(c,"page?page_user_id=").concat(t,"&today=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s()("".concat(c,"todo"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.todo_id,r=t.todo_done,e.next=3,s()("".concat(c,"todo"),{method:"POST",body:JSON.stringify({task:"toggleState",todo_id:n,todo_done:!r}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.todo_id,r=t.todo_description,!n||!r){e.next=6;break}return e.next=4,s()("".concat(c,"todo"),{method:"POST",body:JSON.stringify({task:"updateDescription",todo_id:n,todo_description:r}),headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,s()("".concat(c,"todo?todo_id=").concat(t),{method:"DELETE"});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.todo_id,r=t.todo_archived,e.next=3,s()("".concat(c,"todo"),{method:"POST",body:JSON.stringify({task:"toggleArchive",todo_id:n,todo_archived:r}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.story_id,r=t.todo_id,e.next=3,s()("".concat(c,"story"),{method:"POST",body:JSON.stringify({todo_id:r,story_id:n,task:"add"}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.story_id,r=t.todo_id,e.next=3,s()("".concat(c,"story"),{method:"POST",body:JSON.stringify({todo_id:r,story_id:n,task:"remove"}),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},4423:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9887)}])}},function(e){e.O(0,[765,148,699,774,888,179],(function(){return t=4423,e(e.s=t);var t}));var t=e.O();_N_E=t}]);